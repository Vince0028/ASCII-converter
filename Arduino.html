<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>File Tree to ZIP Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center justify-center p-6">

  <div class="w-full max-w-3xl bg-gray-800 p-8 rounded-xl shadow-lg">
    <h1 class="text-3xl font-bold mb-4 text-green-400 text-center">ASCII Tree to Real ZIP</h1>
    <p class="text-gray-300 text-center mb-4">Paste your folder tree (from `tree` or your own design), then click to download the real ZIP structure.</p>

    <textarea id="treeInput" class="w-full h-60 p-4 rounded bg-black text-green-300 font-mono resize-y" placeholder="Example:
SkillSwapHub/
├── app/
│   ├── templates/
│   │   └── index.html
│   ├── static/
│   │   └── style.css
├── run.py
└── README.md
"></textarea>

    <div class="flex justify-center mt-6">
      <button id="downloadBtn" class="bg-green-500 hover:bg-green-600 text-black font-semibold py-2 px-6 rounded transition">
        Download ZIP
      </button>
    </div>
  </div>

  <script>
    document.getElementById('downloadBtn').addEventListener('click', () => {
      const input = document.getElementById('treeInput').value.trim();
      if (!input) return alert("Paste a tree structure first!");

      const lines = input.split('\n');
      const zip = new JSZip();
      const pathStack = [];

      lines.forEach(line => {
        if (!line.trim()) return;

        const depth = line.search(/\S|$/) / 4;
        let clean = line.replace(/^[\s│├└─]+/, '').trim();

        if (!clean) return;

        pathStack[depth] = clean;
        pathStack.length = depth + 1;

        const fullPath = pathStack.join('/');

        if (clean.endsWith('/')) {
          zip.folder(fullPath.replace(/\/+$/, ''));
        } else {
          zip.file(fullPath, `// Placeholder for ${clean}`);
        }
      });

      zip.generateAsync({ type: 'blob' })
        .then(blob => {
          saveAs(blob, "project_structure.zip");
        });
    });
  </script>

</body>
</html>
